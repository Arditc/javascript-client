{"version":3,"sources":["../../es6/treatments/index.js"],"names":[],"mappings":";;;;;;;;;AAOA,IAAM,YAAY,QAAQ,qCAAR,CAAZ;;AAEN,SAAS,UAAT,CAAoB,2BAApB,EAAiD,+BAAjD,EAAkF;AAChF,MAAI,EAAE,gBAAgB,UAAhB,CAAF,EAA+B;AAChC,WAAO,IAAI,UAAJ,CAAe,QAAf,EAAyB,SAAzB,EAAoC,QAApC,CAAP,CADgC;GAAnC;;AAIA,MAAI,OAAO,OAAO,MAAP,GAAgB,CAAhB,CAAP,KAA8B,GAA9B,EAAmC,MAAM,IAAI,UAAJ,CAAe,mCAAf,CAAN,CAAvC;;AAEA,OAAK,OAAL,GAAe,MAAf,CAPgF;AAQhF,OAAK,WAAL,GAAmB,UAAnB,CARgF;CAAlF;;AAWA,WAAW,KAAX,GAAmB,SAAS,KAAT,CAAe,+BAAf,mBAAkE;qBACxD,KAAK,MAAL,CAAY,UAAC,KAAD,EAAQ,KAAR,EAAkB;QAClD,OAAmB,MAAnB,KADkD;QAC5C,YAAa,MAAb,UAD4C;;;AAGvD,UAAM,MAAN,CAAa,IAAb,CAAmB,MAAM,GAAN,IAAa,IAAb,CAAnB,CAHuD;AAIvD,UAAM,UAAN,CAAiB,IAAjB,CAAuB,SAAvB,EAJuD;;AAMvD,WAAO,KAAP,CANuD;GAAlB,EAOpC;AACD,SAAK,CAAL;AACA,YAAQ,EAAR;AACA,gBAAY,EAAZ;GAVyB,EADwD;;MAC9E,6BAD8E;MACtE,qCADsE;;;AAcnF,SAAO,IAAI,UAAJ,CAAe,MAAf,EAAuB,UAAvB,CAAP,CAdmF;CAAlE;;AAiBnB,WAAW,SAAX,CAAqB,eAArB,GAAuC,SAAS,eAAT,CAAyB,eAAzB,eAAwD;AAC7F,MAAI,IAAI,CAAJ,IAAS,IAAI,GAAJ,EAAS,MAAM,IAAI,UAAJ,CAAe,0CAAf,CAAN,CAAtB;;AAEA,MAAI,QAAQ,UAAU,KAAK,OAAL,EAAc;WAAS,KAAK,KAAL;GAAT,CAAhC,CAHyF;AAI7F,MAAI,YAAY,KAAK,WAAL,CAAiB,KAAjB,CAAZ,CAJyF;;AAM7F,UAAQ,GAAR,CAAY,KAAZ,EAAmB,SAAnB,EAN6F;;AAQ7F,SAAO,SAAP;;;;;;;AAR6F,CAAxD;;AAiBvC,OAAO,OAAP,GAAiB,UAAjB","file":"index.js","sourcesContent":["/*::\n  type PartitionDTO = {\n    treatment: string,\n    size: number\n  }\n*/\n\nconst findIndex = require('core-js/library/fn/array/find-index');\n\nfunction Treatments(ranges /*: array<number> */, treatments /*: array<string> */) {\n  if (!(this instanceof Treatments)) {\n     return new Treatments(baseInfo, evaluator, segments);\n  }\n\n  if (ranges[ranges.length - 1] !== 100) throw new RangeError('Provided invalid dataset as input');\n\n  this._ranges = ranges;\n  this._treatments = treatments;\n}\n\nTreatments.parse = function parse(data /*: array<PartitionDTO> */) /*: Treatments */ {\n  let {ranges, treatments} = data.reduce((accum, value) => {\n    let {size, treatment} = value;\n\n    accum.ranges.push( accum.inc += size );\n    accum.treatments.push( treatment );\n\n    return accum;\n  }, {\n    inc: 0,\n    ranges: [],\n    treatments: []\n  });\n\n  return new Treatments(ranges, treatments);\n}\n\nTreatments.prototype.getTreatmentFor = function getTreatmentFor(x /*: number */) /*: string */ {\n  if (x < 0 || x > 100) throw new RangeError('Please provide a value between 0 and 100');\n\n  let index = findIndex(this._ranges, range => x <= range);\n  let treatment = this._treatments[index];\n\n  console.log(index, treatment);\n\n  return treatment;\n\n  // We need to manually add any dependency which escape of dummy resolution\n  // I'll deal with this in a future release\n  // for (let [k, r] of this._ranges.entries()) {\n  //   if (x <= r) return this._treatments[k];\n  // }\n}\n\nmodule.exports = Treatments;\n"]}