{"version":3,"sources":["../es6/index.js"],"names":[],"mappings":"AAAA;;;;;;;;AAEA,QAAQ,gBAAR;;AAEA,IAAM,YAAY,QAAQ,wBAAR,CAAZ;AACN,IAAI,SAAS,QAAQ,oBAAR,CAAT;;IAEE;AAEJ,WAFI,KAEJ,CAAY,QAAZ,EAAsB,SAAtB,EAAiC,QAAjC,EAA2C;0BAFvC,OAEuC;;AACzC,SAAK,QAAL,GAAgB,QAAhB,CADyC;AAEzC,SAAK,SAAL,GAAiB,SAAjB,CAFyC;AAGzC,SAAK,QAAL,GAAgB,QAAhB,CAHyC;GAA3C;;eAFI;;6BAQK;AACP,aAAO,KAAK,QAAL,CAAc,IAAd,CADA;;;;kCAIK;AACZ,aAAO,KAAK,QAAL,CADK;;;;iCAID,KAAK;AAChB,UAAI,KAAK,QAAL,CAAc,MAAd,EAAsB;AACxB,eAAO,UAAU,OAAV,CADiB;OAA1B;;AAIA,aAAO,KAAK,SAAL,CAAe,GAAf,EAAoB,KAAK,QAAL,CAAc,IAAd,CAA3B,CALgB;;;;yBAQb,KAAK;AACR,aAAO,UAAU,IAAV,CAAe,KAAK,YAAL,CAAkB,GAAlB,CAAf,CAAP,CADQ;;;;gCAIE;AACV,aAAO,KAAK,QAAL,CAAc,MAAd,KAAyB,UAAzB,CADG;;;;0BAIC,oBAAoB;UAC1B,aAA2B,mBAA3B,WAD0B;;UACX,oCAAY,oCADD;;oBAEH,OAAO,UAAP,EAFG;;UAE1B,8BAF0B;UAEf,4BAFe;;AAI/B,aAAO,IAAI,KAAJ,CAAU,QAAV,EAAoB,SAApB,EAA+B,QAA/B,CAAP,CAJ+B;;;;SAhC7B;;;AAyCN,OAAO,OAAP,GAAiB,KAAjB","file":"index.js","sourcesContent":["'use strict';\n\nrequire('babel-polyfill');\n\nconst TREATMENT = require('../treatments/reserved');\nlet parser = require('./parser/condition');\n\nclass Split {\n\n  constructor(baseInfo, evaluator, segments) {\n    this.baseInfo = baseInfo;\n    this.evaluator = evaluator;\n    this.segments = segments;\n  }\n\n  getKey() {\n    return this.baseInfo.name;\n  }\n\n  getSegments() {\n    return this.segments;\n  }\n\n  getTreatment(key) {\n    if (this.baseInfo.killed) {\n      return TREATMENT.CONTROL;\n    }\n\n    return this.evaluator(key, this.baseInfo.seed);\n  }\n\n  isOn(key) {\n    return TREATMENT.isON(this.getTreatment(key));\n  }\n\n  isGarbage() {\n    return this.baseInfo.status === 'ARCHIVED';\n  }\n\n  static parse(splitFlatStructure) {\n    let {conditions, ...baseInfo} = splitFlatStructure;\n    let {evaluator, segments} = parser(conditions);\n\n    return new Split(baseInfo, evaluator, segments);\n  }\n\n}\n\nmodule.exports = Split;\n"]}