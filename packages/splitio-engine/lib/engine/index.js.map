{"version":3,"sources":["../../es6/engine/index.js"],"names":[],"mappings":"WAAY;;AAEZ,IAAI,SAAS,QAAQ,SAAR,EAAmB,MAAnB;AACb,IAAI,MAAM,QAAQ,OAAR,EAAiB,gBAAjB,CAAN;;AAEJ,IAAI,SAAS;;;;;AAIX,sBAAK,mBAAmB,oBAAoB,4CAA6C;AACvF,QAAI,YAAY,KAAK,YAAL,CAAkB,GAAlB,EAAuB,IAAvB,EAA6B,UAA7B,CAAZ,CADmF;;AAGvF,WAAO,cAAc,SAAd,IAA2B,cAAc,KAAd,CAHqD;GAJ9E;;;;;AAaX,sCAAa,mBAAmB,oBAAoB,2CAA4C;AAC9F,QAAI,IAAI,OAAO,GAAP,EAAY,IAAZ,CAAJ,CAD0F;AAE9F,QAAI,YAAY,WAAW,eAAX,CAA2B,CAA3B,CAAZ,CAF0F;;AAI9F,6BAAuB,cAAS,uBAAkB,yBAAoB,SAAtE,EAJ8F;;AAM9F,WAAO,SAAP,CAN8F;GAbrF;CAAT;;AAuBJ,OAAO,OAAP,GAAiB,MAAjB","file":"index.js","sourcesContent":["/* @flow */ 'use strict';\n\nlet bucket = require('./utils').bucket;\nlet log = require('debug')('splitio-engine');\n\nlet engine = {\n  /**\n   * Verifies if the treatment name matches with OFF treatment.\n   */\n  isOn(key /*: string */, seed /*: number */, treatments /*: Treatments */) /*: boolean */ {\n    let treatment = this.getTreatment(key, seed, treatments);\n\n    return treatment !== 'control' && treatment !== 'off';\n  },\n\n  /**\n   * Get the treatment name given a key, a seed, and the percentage of each treatment.\n   */\n  getTreatment(key /*: string */, seed /*: number */, treatments /*: Treatments */) /*: string */ {\n    let b = bucket(key, seed);\n    let treatment = treatments.getTreatmentFor(b);\n\n    log(`[engine] bucket ${b} for ${key} using seed ${seed} - treatment ${treatment}`);\n\n    return treatment;\n  }\n};\n\nmodule.exports = engine;\n"]}