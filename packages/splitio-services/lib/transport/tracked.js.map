{"version":3,"sources":["../../es6/transport/tracked.js"],"names":[],"mappings":"WAAY;;AAEZ,QAAQ,kBAAR;;AAEA,SAAS,cAAT,CAAwB,OAAxB,EAAiC;AAC/B,SAAO,SAAS,cAAT,CAAwB,sBAAxB,gBAA+D;AACpE,QAAI,OAAO,QAAQ,KAAR,CAAc,SAAd,EAAyB,KAAzB,EAAP,CADgE;;AAGpE,WAAO,MAAM,OAAN,EACJ,IADI,CACC,oBAAY;AAChB,cAAQ,OAAR,CAAgB,SAAS,MAAT,CAAhB,CAAiC,GAAjC,GADgB;KAAZ,CADD,CAIJ,IAJI,CAIC;aAAY,SAAS,IAAT;KAAZ,CAJD,CAKJ,IALI,CAKC,kBAAU;AACd,aADc;;AAGd,aAAO,MAAP,CAHc;KAAV,CALD,CAUJ,KAVI,CAUE,iBAAS;AACd,cAAQ,OAAR,CAAgB,SAAS,MAAT,CAAhB,CAAiC,GAAjC,GADc;AAEd,aAFc;;AAId,aAAO,SAAP,CAJc;KAAT,CAVT,CAHoE;GAA/D,CADwB;CAAjC;;AAuBA,OAAO,OAAP,GAAiB,cAAjB","file":"tracked.js","sourcesContent":["/* @flow */ 'use strict';\n\nrequire('isomorphic-fetch');\n\nfunction TrackedRequest(tracker) {\n  return function RequestFactory(request /*: Request */) /*: Promise */ {\n    let stop = tracker.timer('request').start();\n\n    return fetch(request)\n      .then(response => {\n        tracker.counter(response.status).inc();\n      })\n      .then(response => response.json())\n      .then(object => {\n        stop();\n\n        return object;\n      })\n      .catch(error => {\n        tracker.counter(response.status).inc();\n        stop();\n\n        return undefined;\n      });\n  };\n}\n\nmodule.exports = TrackedRequest;\n"]}