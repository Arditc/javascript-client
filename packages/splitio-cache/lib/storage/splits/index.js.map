{"version":3,"sources":["../../../es6/storage/splits/index.js"],"names":[],"mappings":"WAAY;;;;;;;;;;;;;;;;;;;;AAEZ,IAAI,UAAU,mBAAV;;AAEJ,OAAO,OAAP,GAAiB;;;AAEf,0BAAO,sCAAuC;AAC5C,WAAO,OAAP,CAAe,iBAAS;AACtB,UAAI,CAAC,MAAM,SAAN,EAAD,EAAoB;AACtB,gBAAQ,GAAR,CAAY,MAAM,MAAN,EAAZ,EAA4B,KAA5B,EADsB;OAAxB,MAEO;AACL,gBAAQ,MAAR,CAAe,MAAM,MAAN,EAAf,EADK;OAFP;KADa,CAAf,CAD4C;GAF/B;;;AAaf,oBAAI,uCAAwC;AAC1C,WAAO,QAAQ,GAAR,CAAY,WAAZ,CAAP,CAD0C;GAb7B;;;AAkBf,gDAAyB;AACvB,QAAI,aAAa,mBAAb,CADmB;;;;;;;AAGvB,sDAAiB,QAAQ,MAAR,UAAjB,oGAAmC;YAA3B,oBAA2B;;AACjC,qBAAa,6DAAY,8CAAgB,MAAM,WAAN,IAA5B,CAAb,CADiC;OAAnC;;;;;;;;;;;;;;KAHuB;;AAOvB,WAAO,UAAP,CAPuB;GAlBV;;;AA6Bf,yCAAuB;AACrB,WAAO,OAAP,CADqB;GA7BR;CAAjB","file":"index.js","sourcesContent":["/* @flow */ 'use strict';\n\nlet _splits = new Map();\n\nmodule.exports = {\n  // Update the internal Map given an Array of new splits.\n  update(splits /*: Array<Split>*/) /*: void */ {\n    splits.forEach(split => {\n      if (!split.isGarbage()) {\n        _splits.set(split.getKey(), split);\n      } else {\n        _splits.delete(split.getKey());\n      }\n    });\n  },\n\n  // Get the split given a feature name.\n  get(featureName /*: string */) /*: Split */ {\n    return _splits.get(featureName);\n  },\n\n  // Get the current Set of segments across all the split instances available.\n  getSegments() /*: Set */ {\n    let collection = new Set();\n\n    for(let split of _splits.values()) {\n      collection = new Set([...collection, ...(split.getSegments())]);\n    }\n\n    return collection;\n  },\n\n  // Allow stringify of the internal structure.\n  toJSON() /*: object */ {\n    return _splits;\n  }\n};\n"]}