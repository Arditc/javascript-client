{"version":3,"sources":["../../../es6/storage/splits/index.js"],"names":[],"mappings":"WAAY;;;;AAEZ,IAAI,UAAU,IAAI,GAAJ,EAAV;;AAEJ,OAAO,OAAP,GAAiB;;;AAEf,0BAAO,sCAAuC;;AAE5C,WAAO,OAAP,CAAe,aAAK;AAClB,UAAI,CAAC,EAAE,SAAF,EAAD,EAAgB;AAClB,gBAAQ,GAAR,CAAY,EAAE,MAAF,EAAZ,EAAwB,CAAxB,EADkB;OAApB,MAEO;AACL,gBAAQ,MAAR,CAAe,EAAE,MAAF,EAAf,EADK;OAFP;KADa,CAAf,CAF4C;GAF/B;;;AAef,oBAAI,uCAAwC;AAC1C,WAAO,QAAQ,GAAR,CAAY,WAAZ,CAAP,CAD0C;GAf7B;;;AAoBf,gDAAyB;AACvB,QAAI,aAAa,IAAI,GAAJ,EAAb,CADmB;;;;;;;AAGvB,2BAAiB,iCAAjB,oGAA0B;YAAlB,oBAAkB;;AACxB,qBAAa,IAAI,GAAJ,8BAAY,gCAAe,MAAM,WAAN,IAA3B,CAAb,CADwB;OAA1B;;;;;;;;;;;;;;KAHuB;;AAOvB,WAAO,UAAP,CAPuB;GApBV;;;AA+Bf,yCAAuB;AACrB,WAAO,OAAP,CADqB;GA/BR;CAAjB","file":"index.js","sourcesContent":["/* @flow */ 'use strict';\n\nlet _splits = new Map();\n\nmodule.exports = {\n  // Update the internal Map given an Array of new splits.\n  update(splits /*: Array<Split>*/) /*: void */ {\n\n    splits.forEach(s => {\n      if (!s.isGarbage()) {\n        _splits.set(s.getKey(), s);\n      } else {\n        _splits.delete(s.getKey());\n      }\n    });\n\n  },\n\n  // Get the split given a feature name.\n  get(featureName /*: string */) /*: Split */ {\n    return _splits.get(featureName);\n  },\n\n  // Get the current Set of segments across all the split instances available.\n  getSegments() /*: Set */ {\n    let collection = new Set();\n\n    for(let split of _splits) {\n      collection = new Set([...collection, ...split.getSegments()]);\n    }\n\n    return collection;\n  },\n\n  // Allow stringify of the internal structure.\n  toJSON() /*: object */ {\n    return _splits;\n  }\n};\n"]}