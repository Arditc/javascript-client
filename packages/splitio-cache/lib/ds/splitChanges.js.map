{"version":3,"sources":["../../es6/ds/splitChanges.js"],"names":[],"mappings":"WAAY;;AAEZ,IAAM,sBAAsB,QAAQ,kDAAR,CAAtB;AACN,IAAM,sBAAsB,QAAQ,sDAAR,CAAtB;;AAEN,IAAM,sBAAsB,QAAQ,0BAAR,CAAtB;;AAEN,IAAI,QAAQ,CAAC,CAAD;;AAEZ,SAAS,sBAAT,GAAkC;AAChC,SAAO,oBAAoB,oBAAoB;AAC7C,gBAD6C;GAApB,CAApB,EAGN,IAHM,CAGD;WAAQ,KAAK,IAAL;GAAR,CAHC,CAIN,IAJM,CAID,gBAAQ;QACP,OAAgB,KAAhB,KADO;QACD,SAAU,KAAV,OADC;;;AAGZ,YAAQ,IAAR,CAHY;;AAKZ,WAAO,oBAAqB,MAArB,CAAP,CALY;GAAR,CAJN,CADgC;CAAlC;;AAcA,OAAO,OAAP,GAAiB,sBAAjB","file":"splitChanges.js","sourcesContent":["/* @flow */ 'use strict';\n\nconst splitChangesService = require('@splitsoftware/splitio-services/lib/splitChanges');\nconst splitChangesRequest = require('@splitsoftware/splitio-services/lib/splitChanges/get');\n\nconst splitMutatorFactory = require('../mutators/splitChanges');\n\nlet since = -1;\n\nfunction splitChangesDataSource() {\n  return splitChangesService(splitChangesRequest({\n    since\n  }))\n  .then(resp => resp.json())\n  .then(json => {\n    let {till, splits} = json;\n\n    since = till;\n\n    return splitMutatorFactory( splits );\n  });\n}\n\nmodule.exports = splitChangesDataSource;\n"]}