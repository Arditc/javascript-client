{"version":3,"sources":["../es6/browser.js"],"names":[],"mappings":"WAAY,YAAY,CAAC;;AAEzB,OAAO,CAAC,gBAAgB,CAAC,CAAC;;AAE1B,IAAI,oBAAoB,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACtD,IAAI,sBAAsB,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;AAC1D,IAAI,OAAO,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;;AAEnC,IAAI,GAAG,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,eAAe,CAAC,CAAC;;AAE5C,SAAS,MAAM,CAAC,8BAAgB,EAAgB,oBAAM,gBAA+B;AACnF,KAAG,OAAK,gBAAgB,wCAAqC,CAAC;;AAE9D,MAAI,mBAAmB,GAAG,sBAAsB,CAAC,EAAC,gBAAgB,EAAhB,gBAAgB,EAAC,CAAC,CAAC,IAAI,CAAC,UAAA,aAAa,EAAI;AACzF,WAAO,aAAa,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;GAC7C,CAAC,CAAC;;AAEH,MAAI,iBAAiB,GAAG,oBAAoB,CAAC,EAAC,gBAAgB,EAAhB,gBAAgB,EAAE,MAAM,EAAN,MAAM,EAAC,CAAC,CAAC,IAAI,CAAC,UAAA,eAAe,EAAI;AAC/F,WAAO,eAAe,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;GACjD,CAAC,CAAC;;AAEH,SAAO,OAAO,CAAC,GAAG,CAAC,CAAC,mBAAmB,EAAE,iBAAiB,CAAC,CAAC,CAAC,IAAI,CAAE;WAAM,OAAO;GAAA,CAAE,CAAC;CACpF;;AAED,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC","file":"browser.js","sourcesContent":["/* @flow */ 'use strict';\n\nrequire('babel-polyfill');\n\nlet mySegmentsDataSource = require('./ds/mySegments');\nlet splitChangesDataSource = require('./ds/splitChanges');\nlet storage = require('./storage');\n\nlet log = require('debug')('splitio-cache');\n\nfunction writer(authorizationKey /*: string */, userId /*: string */) /*: Promise */ {\n  log(`[${authorizationKey}] Running updater for the browser.`);\n\n  let splitChangesPromise = splitChangesDataSource({authorizationKey}).then(splitsMutator => {\n    return splitsMutator(storage.splits.update);\n  });\n\n  let mySegmentsPromise = mySegmentsDataSource({authorizationKey, userId}).then(segmentsMutator => {\n    return segmentsMutator(storage.segments.update);\n  });\n\n  return Promise.all([splitChangesPromise, mySegmentsPromise]).then( () => storage );\n}\n\nmodule.exports = writer;\n"]}